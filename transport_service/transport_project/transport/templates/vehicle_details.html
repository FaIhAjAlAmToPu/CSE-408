<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Details</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
</head>
<body>


    <div class="row">



        <div class="col-4">
            <div
              class="d-flex flex-column flex-shrink-0 p-3 bg-light"
              style="width: 280px"
            >
              <a
                href="/"
                class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none"
              >
                <svg class="bi me-2" width="40" height="32">
                  <use xlink:href="#bootstrap"></use>
                </svg>
                <span class="fs-4">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="25"
                    fill="currentColor"
                    class="bi bi-person-circle"
                    viewBox="0 0 20 20"
                  >
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                    <path
                      fill-rule="evenodd"
                      d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"
                    /></svg
                  >JARIF ISLAM
                </span>
              </a>
              <hr />
              <ul class="nav nav-pills flex-column mb-auto">
                <p
                  class="text-center font-weight-light"
                  style="font-weight: lighter"
                >
                  Dashboards
                </p>
                <li class="nav-item">
                  <a
                    href="#"
                    class="nav-link link-dark sideLink"
                    aria-current="page"
                  >
                    <svg class="bi me-2" width="16" height="16">
                      <use xlink:href="#home"></use>
                    </svg>
                    Overview
                  </a>
                </li>
                <li>
                  <a href="#" class="nav-link link-dark">
                    <svg class="bi me-2" width="16" height="16">
                      <use xlink:href="#speedometer2"></use>
                    </svg>
                    Sales
                  </a>
                </li>
                <li>
                  <a href="#" class="nav-link link-dark">
                    <svg class="bi me-2" width="16" height="16">
                      <use xlink:href="#table"></use>
                    </svg>
                    Shipment
                  </a>
                </li>
                <p
                  class="text-center font-weight-light"
                  style="font-weight: lighter"
                >
                  Pages
                </p>
                <li>
                  <a href="#" class="nav-link link-dark">
                    <svg class="bi me-2" width="16" height="16">
                      <use xlink:href="#grid"></use>
                    </svg>
                    Stock
                  </a>
                </li>
                <li>
                  <a href="#" class="nav-link link-dark">
                    <svg class="bi me-2" width="16" height="16">
                      <use xlink:href="#people-circle"></use>
                    </svg>
                    Serve Request
                  </a>
                </li>
                <li>
                  <a href="#" class="nav-link link-dark">
                    <svg class="bi me-2" width="16" height="16">
                      <use xlink:href="#grid"></use>
                    </svg>
                    Shipment
                  </a>
                </li>
              </ul>
              <hr />
            </div>
          </div>



          <div class="col-8" style="background-color: honeydew; margin-left: -10%">
            <div
              class="container"
              style="margin: auto; text-align: center; margin-top: 2%"
            >
              
            <h1>Vehicle Details</h1>



            <div class="row">
                <div class="card bg-light" style="width: 27%; margin-left: 5%">
                  <div class="card-body">
                    <h5 class="text-primary">Name</h5>
                    <h6 class="card-subtitle mb-2">{{ vehicle.name }}</h6>
                  </div>
                </div>
      
                <div class="card bg-light" style="width: 27%; margin-left: 4%">
                  <div class="card-body">
                    <h5 class="text-primary">Capacity</h5>
                    <h6 class="card-subtitle mb-2">{{ vehicle.capacity }}</h6>
                  </div>
                </div>
      
                <div class="card bg-light" style="width: 27%; margin-left: 4%">
                  <div class="card-body">
                    <h5 class="text-primary">Status</h5>
                    <h6 class="card-subtitle mb-2">{{ vehicle.status }}</h6>
                  </div>
                </div>
              </div>


    <h2 style="margin-top: 2%;">Current Shipments:</h2>
    

    <div class="btn-group" style="margin-top: 2%; width: 70%; text-align:center">
        {% if vehicle.status == 'available' %}
    <a href="{% url 'assign_shipment' vehicle_id=vehicle.id %}" style="width:40%; margin-left: 5%; margin-top:8%"><button class="btn btn-info">Assign Shipment</button></a>
    <form action="{% url 'confirm_shipments' vehicle_id=vehicle.id %}" method="post">
        {% csrf_token %}
        <button class="btn btn-success" type="submit" style="margin-left: 5%; margin-top:8%">Confirm</button>
    </form>
    {% endif %}
      </div>

    <table class="table table-hover table-striped table-bordered"
    style="margin-top: 2%">
        <thead>
            <tr>
                <th class="text-center">Source</th>
                <th class="text-center">Destination</th>
                <th class="text-center">Weight</th>
                <th class="text-center">Status</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if shipments %}
                {% for shipment in shipments %}
                    <tr>
                        <td class="text-center">{{ shipment.source }}</td>
                        <td class="text-center">{{ shipment.destination }}</td>
                        <td class="text-center">{{ shipment.weight }}</td>
                        <td class="text-center">{{ shipment.status }}</td>
                        <td class="text-center">
                            <form action="{% url 'remove_shipment' vehicle_id=vehicle.id %}" method="post">
                                {% csrf_token %}
                                <input type="hidden" name="shipment_id" value="{{ shipment.id }}">
                                <button class="btn" type="submit" {% if shipment.status == 'en route' %} disabled {% endif %}>
                                    <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="25"
                                    height="25"
                                    fill="currentColor"
                                    class="bi bi-trash"
                                    viewBox="0 0 16 16"
                                    style="color: rgb(255, 0, 0)"
                                  >
                                    <path
                                      d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"
                                    />
                                    <path
                                      d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"
                                    />
                                  </svg>
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" class="text-center">No shipments available</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
    

            </div>
          </div>



    </div>



</body>
</html>
